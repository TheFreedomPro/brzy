<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIDAN LEAVITT BRZY Solutions</title>

  <meta property="og:title" content="Aidan Leavitt | BRZY Solutions" />
  <meta property="og:description" content="Quick Solar Savings Calculator + proof, map, and partners." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://thefreedompro.github.io/BRZY/" />
  <meta property="og:image" content="https://thefreedompro.github.io/BRZY/FullSizeRender.jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://thefreedompro.github.io/BRZY/FullSizeRender.jpeg" />

  <link rel="stylesheet" href="style.css?v=3" />

  <style>
    /* keep totals cards evenly split on desktop, stack on mobile */
    .totals.totals--2 { display:grid; grid-template-columns:repeat(2,1fr); gap:14px; }
    @media (max-width: 860px){ .totals.totals--2{ grid-template-columns:1fr; } }

    /* rep resources buttons */
    .rep-button-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); gap:14px; margin-top:18px; }
    .rep-btn{
      display:block;
      text-align:center;
      padding:14px 18px;
      border-radius:999px;
      font-weight:700;
      text-decoration:none;
      background:#eef4ff;
      color:#1f3c55;
      border:1px solid rgba(31,60,85,.12);
      transition:transform .15s ease, background .15s ease, color .15s ease, border-color .15s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .rep-btn:hover{ transform:translateY(-2px); background:#157a5b; color:#fff; border-color:transparent; }

    /* responsive jotform embed */
    .jotform-wrap{ position:relative; width:100%; padding-top:140%; border-radius:16px; overflow:hidden; border:0; }
    .jotform-wrap iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; }
    @media (min-width: 860px){ .jotform-wrap{ padding-top:95%; } }
  </style>
</head>

<body>

  <header class="hero">
    <div class="container">
      <div class="hero__inner">
        <div class="hero__content">
          <h1 class="title">Calculate Your Savings</h1>
          <p class="subtitle">See how switching to solar can reduce your electricity costs over time.</p>
        </div>

        <img src="IMG_4892.jpeg" alt="BRZY Solutions" class="brzy-logo" />
      </div>

      <div class="hero__logos">
        <img src="IMG_4883.jpeg" alt="SRP" class="utility-logo" />
        <img src="IMG_4884.jpeg" alt="APS" class="utility-logo" />
      </div>
    </div>
  </header>

  <section class="links card" id="more-links">
    <h2 class="section-title">ABOUT US</h2>
    <p class="section-kicker">Independent coverage, rankings, and public profiles.</p>
    <ul class="link-chips">
      <li><a href="https://www.google.com/search?q=aidan%20leavitt%20new%20hampshire" target="_blank" rel="noopener">AIDAN LEAVITT — Google</a></li>
      <li><a href="https://www.bbb.org/us/az/phoenix/profile/solar-installation/independent-solar-1126-1000110842" target="_blank" rel="noopener">BBB A+ RATING — Google</a></li>
      <li><a href="https://www.aps.com/en/About/Sustainability-and-Innovation/Technology-and-Innovation/Storage-Rewards" target="_blank" rel="noopener">APS VPP INCENTIVE</a></li>
      <li><a href="https://www.srpnet.com/energy-savings-rebates/home/residential-solar/battery-partner" target="_blank" rel="noopener">SRP PARTNER PROGRAM</a></li>
    </ul>
  </section>

  <section class="links card" id="rep-links">
    <h2 class="section-title">REP RESOURCES</h2>
    <p class="section-kicker">Direct access for BRZY reps.</p>

    <div class="rep-button-grid">
      <a class="rep-btn" href="https://brzynrg.com" target="_blank" rel="noopener">BRZY NRG</a>
      <a class="rep-btn" href="https://brzy.university" target="_blank" rel="noopener">BRZY UNIVERSITY</a>
      <a class="rep-btn" href="https://brzy.university/recruiting" target="_blank" rel="noopener">BRZY RECRUITING</a>
      <a class="rep-btn" href="https://phx.gosolo.io/login" target="_blank" rel="noopener">GOSOLO</a>
      <a class="rep-btn" href="https://aurorasolar.com" target="_blank" rel="noopener">AURORA</a>
    </div>
  </section>

  <main class="container">

    <div class="phone-header">
      <div class="phone-text">
        <p class="phone-number">
          <a href="sms:16037679594?&body=SOLAR">CLICK HERE FOR QUESTIONS?</a>
        </p>
        <p style="font-size:16px; font-weight:700; color:#157a5b; margin:4px 0 0 0;">
          ⬆️ Click Questions? above to see
        </p>
      </div>
    </div>

    <section class="card">
      <form id="calcForm" class="form-grid" onsubmit="return false;">
        <div class="field">
          <label for="bill">Monthly utility bill ($)</label>
          <input id="bill" type="number" min="0" step="1" placeholder="e.g., 180" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="solarPayment">Monthly Battery + solar payment ($)</label>
          <input id="solarPayment" type="number" min="0" step="1" placeholder="e.g., 135" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="yearsRange">Timeline (years): <span id="yearsDisplay">25</span></label>
          <div class="range-wrap">
            <input id="yearsRange" type="range" min="1" max="30" value="25" />
          </div>
        </div>

        <input id="utilityEsc" type="hidden" value="0.09" />

        <div class="field span-2">
          <label for="solarEsc">Battery escalator (PPA/lease rate increase)</label>
          <select id="solarEsc">
            <option value="0.0199" selected>1.99% per year</option>
            <option value="0.0299">2.99% per year</option>
            <option value="0.0349">3.949% per year</option>
            <option value="0">0% (fixed)</option>
          </select>
        </div>

        <div class="actions span-3">
          <button id="runBtn" class="btn" type="button">Calculate</button>
        </div>
      </form>

      <div class="totals totals--2">
        <div class="total card-lite">
          <div class="total-label">Total Utility Cost</div>
          <div id="utilTotal" class="total-value">$0</div>
        </div>

        <div class="total card-lite">
          <div class="total-label">Estimated Utility Monthly (Year <span id="snapYearMini">25</span>)</div>
          <div id="utilMonthlyAtYear" class="total-value">$0</div>
        </div>
      </div>

      <article class="snapshot card-lite">
        <header class="snap-header">
          <h2 class="snap-year">Year <span id="snapYear">25</span></h2>
          <span class="snap-tag">Snapshot</span>
        </header>

        <div class="snap-rows">
          <div class="row"><span class="label">Monthly utility</span><span id="selMonthlyUtility" class="value">$0.00</span></div>
          <div class="row"><span class="label">Annual utility</span><span id="selAnnualUtility" class="value">$0.00</span></div>
        </div>
      </article>
    </section>

    <section class="card" id="battery-credit">
      <div class="totals totals--2" style="margin-top:16px;">
        <div class="total card-lite">
          <div class="total-label">Estimated monthly credit</div>
          <div id="monthlyCredit" class="total-value">$0</div>
        </div>

        <div class="total card-lite">
          <div class="total-label">Estimated annual credit</div>
          <div id="annualCredit" class="total-value">$0</div>
        </div>
      </div>

      <p id="creditNote" class="section-kicker" style="margin-top:12px;"></p>

      <h2 class="section-title">Battery Program Credit (APS or SRP)</h2>
      <p class="section-kicker">
        This is an estimate based on event performance (kW delivered during events), not monthly kWh usage.
        If your bill shows peak demand (kW), enter it to personalize the estimate.
      </p>

      <div class="form-grid" style="margin-top:14px;">
        <div class="field">
          <label for="program">Utility / Program</label>
          <select id="program">
            <option value="APS_TESLA_VPP">APS Tesla VPP (annual cap model)</option>
            <option value="SRP_BATTERY_PARTNER" selected>SRP Battery Partner (kW per season)</option>
          </select>
        </div>

        <div class="field">
          <label for="batteryModel">Battery model</label>
          <select id="batteryModel"></select>
        </div>

        <div class="field">
          <label for="batteryQty">Battery quantity</label>
          <input id="batteryQty" type="number" min="1" step="1" value="1" inputmode="numeric" />
        </div>

        <div class="field">
          <label for="peakDemandKw">Peak demand from bill (kW) optional</label>
          <input id="peakDemandKw" type="number" min="0" step="0.1" placeholder="e.g., 8.5" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="autoFromDemand">Auto-set event kW from demand</label>
          <select id="autoFromDemand">
            <option value="1" selected>On (recommended)</option>
            <option value="0">Off (manual)</option>
          </select>
        </div>

        <div class="field">
          <label for="commitKw">Avg event kW per battery (editable)</label>
          <input id="commitKw" type="number" min="0" step="0.1" value="13.5" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="perf">Performance factor (standard)</label>
          <input id="perf" type="number" min="0" max="1" step="0.01" value="0.85" inputmode="decimal" />
        </div>

        <div class="field">
          <label for="usableKwh">Estimated usable energy (kWh)</label>
          <input id="usableKwh" type="text" readonly />
        </div>

        <div class="field">
          <label for="powerKw">Max discharge power (kW)</label>
          <input id="powerKw" type="text" readonly />
        </div>

        <div class="field">
          <label for="creditedKw">Credited kW (avg)</label>
          <input id="creditedKw" type="text" readonly />
        </div>

        <div class="actions span-3">
          <button id="calcBatteryBtn" class="btn" type="button">Calculate credit</button>
        </div>
      </div>
    </section>

    <section class="reviews">
      <h2 class="section-title">What local homeowners are saying</h2>
      <p class="section-kicker">Independent public feedback from real customers.</p>
      <div class="reviews-grid">
        <figure class="rev"><img src="IMG_4873.jpeg" alt="Freedom Forever" /></figure>
        <figure class="rev"><img src="IMG_4875.jpeg" alt="Freedom Forever" /></figure>
        <figure class="rev"><img src="IMG_4877.jpeg" alt="Freedom Forever" /></figure>
        <figure class="rev"><img src="IMG_4878.jpeg" alt="Freedom Forever" /></figure>
        <figure class="rev"><img src="IMG_4879.jpeg" alt="Brad review" /></figure>
        <figure class="rev"><img src="IMG_4876.jpeg" alt="Tammy review" /></figure>
      </div>
    </section>

    <section class="slides">
      <img src="02D5DE42-86E4-47FB-9EA8-5A0BB9E3F7DF.png" alt="Sponsors" loading="lazy" />
      <img src="87641ED5-805B-417F-959C-DE5972223E0E.png" alt="FAQ" loading="lazy" />
      <img src="171F7CB4-3F6B-41ED-A2DF-F6D7486D49E1.png" alt="Quality call" loading="lazy" />
    </section>

    <section class="card" id="lead-form">
      <h2 class="section-title">Quick Form</h2>
      <p class="section-kicker">Fill this out at the end to lock in the details.</p>

      <div class="jotform-wrap">
        <iframe
          src="https://form.jotform.com/233164587079062"
          title="Solar Intake Form"
          loading="lazy"
          allow="geolocation; microphone; camera"
        ></iframe>
      </div>
    </section>

  </main>

  <script>
    (function () {
      const $ = (id) => document.getElementById(id);

      const billEl = $("bill");
      const solarPaymentEl = $("solarPayment"); // kept for your workflow, not displayed in totals
      const yearsRangeEl = $("yearsRange");
      const yearsDisplayEl = $("yearsDisplay");
      const snapYearEl = $("snapYear");
      const snapYearMiniEl = $("snapYearMini");
      const utilityEscEl = $("utilityEsc");
      const runBtn = $("runBtn");

      const utilTotalEl = $("utilTotal");
      const utilMonthlyAtYearEl = $("utilMonthlyAtYear");
      const selMonthlyUtilityEl = $("selMonthlyUtility");
      const selAnnualUtilityEl = $("selAnnualUtility");

      // Battery credit elements
      const programEl = $("program");
      const batteryModelEl = $("batteryModel");
      const batteryQtyEl = $("batteryQty");
      const peakDemandKwEl = $("peakDemandKw");
      const autoFromDemandEl = $("autoFromDemand");
      const commitKwEl = $("commitKw");
      const perfEl = $("perf");
      const usableKwhEl = $("usableKwh");
      const powerKwEl = $("powerKw");
      const creditedKwEl = $("creditedKw");
      const calcBatteryBtn = $("calcBatteryBtn");
      const monthlyCreditEl = $("monthlyCredit");
      const annualCreditEl = $("annualCredit");
      const creditNoteEl = $("creditNote");

      const money0 = (n) => {
        const v = Number.isFinite(n) ? n : 0;
        return v.toLocaleString(undefined, { style: "currency", currency: "USD", maximumFractionDigits: 0 });
      };
      const money2 = (n) => {
        const v = Number.isFinite(n) ? n : 0;
        return v.toLocaleString(undefined, { style: "currency", currency: "USD", minimumFractionDigits: 2, maximumFractionDigits: 2 });
      };
      const clamp = (x, a, b) => Math.max(a, Math.min(b, x));

      function updateYearsUI() {
        const y = Number(yearsRangeEl.value || 25);
        yearsDisplayEl.textContent = String(y);
        snapYearEl.textContent = String(y);
        snapYearMiniEl.textContent = String(y);
      }

      function calcUtility() {
        const bill = parseFloat(billEl.value || "0");
        const years = Number(yearsRangeEl.value || 25);
        const esc = parseFloat(utilityEscEl.value || "0.09");

        // total utility cost over years with annual escalation
        let total = 0;
        for (let i = 0; i < years; i++) {
          const yearFactor = Math.pow(1 + esc, i);
          total += bill * 12 * yearFactor;
        }

        const snapMonthly = bill * Math.pow(1 + esc, years - 1);
        const snapAnnual = snapMonthly * 12;

        utilTotalEl.textContent = money0(total);
        utilMonthlyAtYearEl.textContent = money0(snapMonthly);
        selMonthlyUtilityEl.textContent = money2(snapMonthly);
        selAnnualUtilityEl.textContent = money2(snapAnnual);
      }

      // Battery models + program parameters
      const batteryModels = [
        { id: "PW3", label: "Tesla Powerwall 3", usableKwh: 13.5, powerKw: 11.5, note: "Typical values" },
        { id: "PW2", label: "Tesla Powerwall 2", usableKwh: 13.5, powerKw: 5.0, note: "Typical values" },
        { id: "ENCHARGE10", label: "Enphase IQ Battery 10T", usableKwh: 10.0, powerKw: 3.84, note: "Typical values" }
      ];

      const programs = {
        SRP_BATTERY_PARTNER: {
          label: "SRP Battery Partner",
          kind: "srp",
          dollarsPerKwPerSeason: 55,
          seasonsPerYear: 2,
          note: "SRP Battery Partner is $55 per kW per season, 2 seasons per year. Actual payouts depend on events and performance."
        },
        APS_TESLA_VPP: {
          label: "APS Tesla VPP",
          kind: "aps_cap",
          capPerBatteryYear: 1200, // model: annual cap per battery, scaled by delivered power
          note: "APS Tesla VPP estimate uses an annual cap model scaled by credited kW and performance."
        }
      };

      function fillBatteryModels() {
        batteryModelEl.innerHTML = "";
        batteryModels.forEach((b) => {
          const opt = document.createElement("option");
          opt.value = b.id;
          opt.textContent = b.label;
          batteryModelEl.appendChild(opt);
        });
        batteryModelEl.value = "PW3";
      }

      function getSelectedBattery() {
        return batteryModels.find((b) => b.id === batteryModelEl.value) || batteryModels[0];
      }

      function setDerivedBatteryFields() {
        const b = getSelectedBattery();
        const qty = Math.max(1, parseInt(batteryQtyEl.value || "1", 10));
        usableKwhEl.value = (b.usableKwh * qty).toFixed(1);
        powerKwEl.value = (b.powerKw * qty).toFixed(2);
      }

      function maybeAutoCommitKw() {
        const b = getSelectedBattery();
        const qty = Math.max(1, parseInt(batteryQtyEl.value || "1", 10));
        const maxPowerTotal = b.powerKw * qty;

        const autoOn = String(autoFromDemandEl.value) === "1";
        const peak = parseFloat(peakDemandKwEl.value || "");

        if (autoOn && Number.isFinite(peak) && peak > 0) {
          // simple heuristic: target ~90% of peak, capped by battery power
          const perBattery = clamp((peak * 0.9) / qty, 0, b.powerKw);
          commitKwEl.value = perBattery.toFixed(1);
        } else {
          // keep whatever the user typed
        }

        // update credited field preview
        const perf = clamp(parseFloat(perfEl.value || "0.85"), 0, 1);
        const commitPerBattery = clamp(parseFloat(commitKwEl.value || "0"), 0, b.powerKw);
        const credited = commitPerBattery * qty * perf;
        creditedKwEl.value = credited.toFixed(2);
      }

      function calcCredit() {
        const p = programs[programEl.value] || programs.SRP_BATTERY_PARTNER;
        const b = getSelectedBattery();
        const qty = Math.max(1, parseInt(batteryQtyEl.value || "1", 10));
        const perf = clamp(parseFloat(perfEl.value || "0.85"), 0, 1);

        setDerivedBatteryFields();

        const commitPerBattery = clamp(parseFloat(commitKwEl.value || "0"), 0, b.powerKw);
        const maxPowerTotal = b.powerKw * qty;

        const credited = clamp(commitPerBattery * qty * perf, 0, maxPowerTotal * perf);
        creditedKwEl.value = credited.toFixed(2);

        let annual = 0;

        if (p.kind === "srp") {
          annual = credited * p.dollarsPerKwPerSeason * p.seasonsPerYear;
        } else if (p.kind === "aps_cap") {
          const cap = p.capPerBatteryYear * qty;
          const maxCreditable = maxPowerTotal * perf;
          const utilization = maxCreditable > 0 ? clamp(credited / maxCreditable, 0, 1) : 0;
          annual = cap * utilization;
        }

        const monthly = annual / 12;

        annualCreditEl.textContent = money0(annual);
        monthlyCreditEl.textContent = money0(monthly);
        creditNoteEl.textContent = p.note;
      }

      // Wire up
      yearsRangeEl.addEventListener("input", () => { updateYearsUI(); calcUtility(); });
      runBtn.addEventListener("click", calcUtility);

      // keep input present; no output shown for it
      solarPaymentEl.addEventListener("input", () => { /* intentionally no display */ });

      fillBatteryModels();
      setDerivedBatteryFields();
      maybeAutoCommitKw();
      calcCredit();

      programEl.addEventListener("change", calcCredit);
      batteryModelEl.addEventListener("change", () => { setDerivedBatteryFields(); maybeAutoCommitKw(); calcCredit(); });
      batteryQtyEl.addEventListener("input", () => { setDerivedBatteryFields(); maybeAutoCommitKw(); calcCredit(); });
      peakDemandKwEl.addEventListener("input", () => { maybeAutoCommitKw(); calcCredit(); });
      autoFromDemandEl.addEventListener("change", () => { maybeAutoCommitKw(); calcCredit(); });
      commitKwEl.addEventListener("input", () => { maybeAutoCommitKw(); calcCredit(); });
      perfEl.addEventListener("input", () => { maybeAutoCommitKw(); calcCredit(); });
      calcBatteryBtn.addEventListener("click", calcCredit);

      updateYearsUI();
      calcUtility();
    })();
  </script>
</body>
</html>
